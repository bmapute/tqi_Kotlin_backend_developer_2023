CREATE TABLE category (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   name VARCHAR(255) NOT NULL,
   CONSTRAINT pk_category PRIMARY KEY (id)
);

CREATE TABLE "order" (
  id UUID NOT NULL,
   status VARCHAR(255),
   create_at TIMESTAMP WITHOUT TIME ZONE,
   payment_type VARCHAR(255) NOT NULL,
   total_amount DECIMAL NOT NULL,
   CONSTRAINT pk_order PRIMARY KEY (id)
);

CREATE TABLE order_item (
  id BIGINT NOT NULL,
   product_id BIGINT NOT NULL,
   quantity DOUBLE PRECISION NOT NULL,
   price DECIMAL,
   order_id UUID,
   CONSTRAINT pk_order_item PRIMARY KEY (id)
);

ALTER TABLE order_item ADD CONSTRAINT FK_ORDER_ITEM_ON_ORDER FOREIGN KEY (order_id) REFERENCES "order" (id);

CREATE TABLE product (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   name VARCHAR(255) NOT NULL,
   unit_of_measurement VARCHAR(255) NOT NULL,
   price DECIMAL NOT NULL,
   category_id BIGINT NOT NULL,
   CONSTRAINT pk_product PRIMARY KEY (id)
);

ALTER TABLE product ADD CONSTRAINT FK_PRODUCT_ON_CATEGORY FOREIGN KEY (category_id) REFERENCES category (id);